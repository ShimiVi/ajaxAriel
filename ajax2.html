<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <h1>async!</h1>

<style>
    h1{
        text-align: center;
    }
    .a{
        width: 40%; margin: auto;display: flex; gap:60px;
    }
    .txt{
        background-color: aquamarine;
    }
    .js{
        background-color: lightblue;
    }
    .json{
        background-color: lightgreen;
    }
    .html{
        background-color: lightcoral;
    }
 </style>


<div class="a">
  <div class="txt">
  </div>
  <div class="js">
  </div>
  <div class="json">
  </div>
  <div class="html">
  </div>

</div>

<script>
console.log("global this", this);
 let jsonResults;

(function loadDoc() {
 console.log("load this", this);
 
 
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        console.log(this.responseText , this);
        
      document.querySelector(".txt").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", "https://raw.githubusercontent.com/ShimiVi/ajaxAriel/refs/heads/main/say%20ho.text", true);
  xhttp.send();
  console.log("after send");
  
})();

function smartLoadDoc(url, targetEl) {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      targetEl.innerHTML = this.responseText;
      //jsonResults = JSON.parse(this.responseText);
    }
  };
  xhttp.open("GET", url);
  xhttp.send();
}

smartLoadDoc(
    "https://raw.githubusercontent.com/ShimiVi/ajaxAriel/refs/heads/main/someDB.json",
    document.querySelector(".json")
);
smartLoadDoc(
    "https://raw.githubusercontent.com/ShimiVi/ajaxAriel/refs/heads/main/someDB.js",
    document.querySelector(".js")
);
smartLoadDoc(
    "https://raw.githubusercontent.com/ShimiVi/ajaxAriel/refs/heads/main/comp-calc.html",
    document.querySelector(".html")
);
</script> 

